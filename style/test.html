<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Reader 通用库测试</title>

    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css"/>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light-border.css"/>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/moodHappy/HelloWorld@master/Notes/ai-reader.css">

    <style>
        /* 页面基础样式 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.8;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
            position: relative; /* 为绝对定位的齿轮做参照 */
        }

        header { margin-bottom: 30px; text-align: center; }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: #ffffff;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        p { margin-bottom: 24px; font-size: 18px; text-align: justify; }

        /* 右上角齿轮按钮样式 */
        .settings-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #fff;
            border: 1px solid #ddd;
            font-size: 20px;
            color: #666;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 1000;
            outline: none;
        }

        /* 鼠标悬停动画 */
        .settings-btn:hover {
            transform: rotate(90deg);
            background-color: #f0f0f0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Key 已保存时的样式（绿色） */
        .settings-btn.has-key {
            border-color: #b7eb8f;
            color: #52c41a;
            background-color: #f6ffed;
        }
    </style>
</head>
<body>

    <button id="configBtn" class="settings-btn" onclick="configKey()" title="设置 Groq API Key">
        ⚙️
    </button>

    <header>
        <h1>阅读助手通用模板</h1>
    </header>

    <div class="container" id="content-area">
    	
<p>As the sun set over the quiet streets of Salisbury, a chill ran down the spine of the city's residents. It had been years since the fateful day when Sergei Skripal, a former Russian spy, and his daughter Yulia were poisoned with Novichok, a deadly nerve agent. The incident had sent shockwaves through the community, and the memory of it still lingered like an open wound.</p>

        <p>President Vladimir Putin has warned again that Ukrainian troops must withdraw from Ukraine's eastern Donbas region or Russia will seize it, rejecting any compromise over how to end the war in Ukraine.</p>

        <p>"Either we liberate these territories by force, or Ukrainian troops will leave these territories," he told India Today. Moscow controls around 85% of Donbas.</p>

        <p>Ukrainian President Volodymyr Zelensky has ruled out ceding territory.</p>

        <p>Putin's comments come after President Donald Trump said his negotiators discussing a US peace plan believed Russia's leader "would like to end the war" after Tuesday's talks in Moscow.</p>

        <p>Trump's envoy Steve Witkoff, who was in Moscow, is due to meet Ukraine's team in Florida.</p>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script src="https://unpkg.com/compromise@14.10.0/builds/compromise.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/moodHappy/HelloWorld@master/Notes/ai-reader.js"></script>

    <script>
        // Key 管理逻辑
        function configKey() {
            const currentKey = localStorage.getItem('groq_api_key') || '';
            const val = prompt("请输入您的 Groq API Key:", currentKey);
            
            if(val !== null) { 
                const cleanVal = val.trim();
                if(cleanVal) {
                    localStorage.setItem('groq_api_key', cleanVal);
                    alert("API Key 已保存！页面将刷新。");
                    location.reload(); 
                } else {
                    if(currentKey && confirm("确定要清除 API Key 吗？")) {
                        localStorage.removeItem('groq_api_key');
                        location.reload();
                    }
                }
            }
        }

        // 页面加载时检查 Key 状态
        document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('configBtn');
            if(localStorage.getItem('groq_api_key')) {
                // 如果有 Key，添加绿色样式，并修改鼠标悬停提示
                btn.classList.add('has-key');
                btn.title = 'API Key 已保存 (点击修改)';
            }
        });

        // 启动 AIReader
        document.addEventListener('DOMContentLoaded', () => {
            new AIReader({
                containerSelector: '#content-area', 
                blueUrl: 'https://raw.githubusercontent.com/moodHappy/HelloWorld/master/Notes/blue.txt',
                redUrl: 'https://raw.githubusercontent.com/moodHappy/HelloWorld/master/Notes/red.txt',
                excludeUrl: 'https://raw.githubusercontent.com/moodHappy/HelloWorld/master/Notes/exclude.txt'
            });
            console.log("AI Reader 已启动");
        });
    </script>
</body>
</html>
