<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Reader 通用库测试</title>

    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/animations/shift-away.css"/>
    <link rel="stylesheet" href="https://unpkg.com/tippy.js@6/themes/light-border.css"/>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/moodHappy/HelloWorld@master/Notes/ai-reader.css">

    <style>
        /* 测试页面的基础排版，与 AIReader 库无关 */
        body {
            font-family: 'Georgia', 'Microsoft YaHei', serif;
            line-height: 1.8;
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #fcfbf9;
            color: #333;
        }
        header {
            border-bottom: 1px solid #eee;
            margin-bottom: 40px;
            padding-bottom: 20px;
        }
        .api-setup {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: sans-serif;
            font-size: 14px;
            margin-bottom: 30px;
        }
        input[type="password"] {
            padding: 5px;
            border-radius: 4px;
            border: 1px solid #ccc;
            width: 250px;
        }
        button {
            padding: 5px 15px;
            background: #8b7355;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #6b5b4f; }
    </style>
</head>
<body>

    <header>
        <h1>AI Reader Library Test</h1>
        <p>这是一个引入了你托管在 GitHub 上的 JS 和 CSS 的测试页面。</p>
        
        <div class="api-setup">
            <label>Groq API Key (用于测试 AI 分析): </label>
            <input type="password" id="tempApiKey" placeholder="gsk_...">
            <button onclick="saveKey()">保存并刷新</button>
            <span id="keyStatus" style="margin-left:10px; color:green; display:none;">已设置</span>
        </div>
    </header>

    <div id="my-article">
        <h2>The Frog Prince</h2>
        <p>
            One fine evening a young princess put on her bonnet and clogs, and went out to take a walk by herself in a wood; and when she came to a cool spring of water, that rose in the midst of it, she sat herself down to rest a while. Now she had a golden ball in her hand, which was her favourite plaything; and she was always tossing it up into the air, and catching it again as it fell.
        </p>
        <p>
            After a time she threw it up so high that she missed catching it as it fell; and the ball bounded away, and rolled along upon the ground, till at last it fell down into the spring. The princess looked into the spring after her ball, but it was very deep, so deep that she could not see the bottom of it.
        </p>
        <p>
            Then she began to bewail her loss, and said, "Alas! if I could only get my ball again, I would give all my fine clothes and jewels, and everything that I have in the world."
        </p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>
    <script src="https://unpkg.com/compromise@14.10.0/builds/compromise.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/moodHappy/HelloWorld@master/Notes/ai-reader.js"></script>

    <script>
        // 简单的 Key 管理逻辑
        function saveKey() {
            const val = document.getElementById('tempApiKey').value.trim();
            if(val) {
                localStorage.setItem('groq_api_key', val);
                location.reload();
            }
        }
        if(localStorage.getItem('groq_api_key')) {
            document.getElementById('keyStatus').style.display = 'inline';
            document.getElementById('tempApiKey').placeholder = '已保存 (如需修改请直接输入)';
        }

        // --- 核心初始化代码 ---
        document.addEventListener('DOMContentLoaded', () => {
            // 实例化你的 AIReader
            const reader = new AIReader({
                // 指定要处理的 HTML 元素 ID
                containerSelector: '#my-article', 
                
                // 可选：在这里传入 URL，或者让库自己去读 localStorage
                // blueUrl: 'https://raw.githubusercontent.com/moodHappy/HelloWorld/refs/heads/master/Notes/blue_words.txt',
                
                // 如果 localStorage 里没存，也可以在这里硬编码 API Key (不推荐用于生产环境)
                // apiKey: 'gsk_...' 
            });

            console.log("AI Reader 已启动");
        });
    </script>
</body>
</html>
